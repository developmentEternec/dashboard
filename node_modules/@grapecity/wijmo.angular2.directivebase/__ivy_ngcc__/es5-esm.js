/*!
    *
    * Wijmo Library 5.20211.794
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

import{EventEmitter,NgZone}from"@angular/core";import*as wijmo from"@grapecity/wijmo";import * as ɵngcc0 from '@angular/core';
var WjOptions=function(){function WjOptions(){}WjOptions.asyncBindings=!0;return WjOptions}();export{WjOptions};var WjComponentResolvedMetadata=function(){function WjComponentResolvedMetadata(e){this.changeEventMap=[];this.allImplEvents=[];this.resolveChangeEventMap(e)}WjComponentResolvedMetadata.prototype.resolveChangeEventMap=function(e){var t=this.changeEventMap,i=e.outputs,r=e.changeEvents||{};t.splice(0,t.length);this.allImplEvents=[];if(i&&i.length){var n=i.map((function(e){return e.split(":")})).map((function(e){return{implName:e[0].trim(),exposeName:e[1]&&e[1].trim()}}));this.allImplEvents=n.map((function(e){return e.implName}));for(var o=0,s=n.filter((function(e){return e.implName&&e.exposeName}));o<s.length;o++){var a=s[o];if(Ng2Utils.getWjEventName(a.implName)){var v={eventImpl:a.implName,event:a.exposeName},h=r[a.exposeName];h&&h.length&&(v.props=h.map((function(e){return{prop:e,evExposed:Ng2Utils.getChangeEventNameExposed(e),evImpl:Ng2Utils.getChangeEventNameImplemented(e)}})));t.push(v)}}for(var l in r)if(l.indexOf(".")>-1){v={eventImpl:null,event:l,props:r[l].map((function(e){return{prop:e,evExposed:Ng2Utils.getChangeEventNameExposed(e),evImpl:Ng2Utils.getChangeEventNameImplemented(e)}}))};t.push(v)}}};return WjComponentResolvedMetadata}();export{WjComponentResolvedMetadata};var WjDirectiveBehavior=function(){function WjDirectiveBehavior(e,t,i,r){this._pendingEvents=[];this.isInitialized=!1;this.isDestroyed=!1;this.nzRun=function(e){return e()};this.directive=e;this.elementRef=t;this.injector=i;var n=this.nz=i.get(NgZone);n&&(this.nzRun=n.run.bind(n));this.injectedParent=r;var o=this.typeData=e.constructor[WjDirectiveBehavior.directiveTypeDataProp];null==o.siblingId&&(o.siblingId=++WjDirectiveBehavior.siblingDirId+"");var s=e.constructor[WjDirectiveBehavior.directiveResolvedTypeDataProp];s?this.resolvedTypeData=s:e.constructor[WjDirectiveBehavior.directiveResolvedTypeDataProp]=s=this.resolvedTypeData=new WjComponentResolvedMetadata(o);e[WjDirectiveBehavior.BehaviourRefProp]=this;i[WjDirectiveBehavior.BehaviourRefProp]=this;e[WjDirectiveBehavior.isInitializedPropAttr]=!1;this._createEvents();this._setupAsChild();this._isHostElement()&&t.nativeElement.setAttribute(WjDirectiveBehavior.siblingDirIdAttr,o.siblingId);this.subscribeToEvents(!1)}WjDirectiveBehavior.getHostElement=function(e,t){WjDirectiveBehavior.ngZone=t.get(NgZone);return e.nativeElement};WjDirectiveBehavior.attach=function(e,t,i,r){return new WjDirectiveBehavior(e,t,i,r)};WjDirectiveBehavior.getZone=function(e){var t=WjDirectiveBehavior.getBehavior(e);return t&&t.nz||WjDirectiveBehavior.ngZone};WjDirectiveBehavior.prototype.ngOnInit=function(){this.isInitialized=!0;this._initParent();this.subscribeToEvents(!0)};WjDirectiveBehavior.prototype.ngAfterViewInit=function(){var e=this;this.directive[WjDirectiveBehavior.isInitializedPropAttr]=!0;setTimeout((function(){e.isDestroyed||e.directive[WjDirectiveBehavior.initializedEventAttr].emit(void 0)}))};WjDirectiveBehavior.prototype.ngOnDestroy=function(){if(!this.isDestroyed){this.isDestroyed=!0;var e=this.directive;this._siblingInsertedEH&&this.elementRef.nativeElement.removeEventListener("DOMNodeInserted",this._siblingInsertedEH);if(this._isChild()&&this.parentBehavior){var t=this.parentBehavior.directive,i=this._getParentProp();if(!this.parentBehavior.isDestroyed&&t&&i&&e){var r=t[i];if(wijmo.isArray(r)&&r){var n=r.indexOf(e);n>=0&&r.splice(n,1)}}}if(e instanceof wijmo.Control&&e.hostElement){var o=this.elementRef.nativeElement,s=o&&o.parentNode,a=s?Array.prototype.indexOf.call(s.childNodes,o):-1;e.dispose();if(a>-1&&Array.prototype.indexOf.call(s.childNodes,o)<0){o.textContent="";a<s.childNodes.length&&s.replaceChild(o,s.childNodes[a])}}this.injector[WjDirectiveBehavior.BehaviourRefProp]=null}};WjDirectiveBehavior.instantiateTemplate=function(e,t,i,r,n){void 0===r&&(r=!1);void 0===n&&(n={});var o,s=t.createEmbeddedView(i,n,t.length),a=s.rootNodes;if(r&&1===a.length)o=a[0];else{o=document.createElement("div");for(var v=0,h=a;v<h.length;v++){var l=h[v];o.appendChild(l)}}e&&e.appendChild(o);return{viewRef:s,rootElement:o}};WjDirectiveBehavior.prototype.getPropChangeEvent=function(e){var t=this.typeData.changeEvents;if(t)for(var i in t)if(t[i].indexOf(e)>-1)return i;return null};WjDirectiveBehavior.prototype._createEvents=function(){for(var e=0,t=this.resolvedTypeData.allImplEvents;e<t.length;e++){var i=t[e];this.directive[i]=new EventEmitter(!1)}};WjDirectiveBehavior.prototype.subscribeToEvents=function(e){var t=this.resolvedTypeData.changeEventMap;e=!!e;for(var i=0,r=t;i<r.length;i++){e!==(s=r[i]).event.indexOf(".")<0&&this.addHandlers(s)}if(e)for(var n=0,o=t;n<o.length;n++){var s=o[n];this.triggerPropChangeEvents(s,!0)}};WjDirectiveBehavior.prototype.addHandlers=function(e){var t=this,i=this.directive;WjDirectiveBehavior.evaluatePath(i,e.event).addHandler((function(r,n){t.nzRun((function(){t.isInitialized&&t.triggerPropChangeEvents(e);e.eventImpl&&t._triggerEvent(i[e.eventImpl],n,e.props&&e.props.length>0)}))}))};WjDirectiveBehavior.prototype.triggerPropChangeEvents=function(e,t){void 0===t&&(t=!0);var i=this.directive;if(e.props&&e.props.length)for(var r=0,n=e.props;r<n.length;r++){var o=n[r];this._triggerEvent(i[o.evImpl],i[o.prop],t)}};WjDirectiveBehavior.prototype._setupAsChild=function(){if(this._isChild()){this._isHostElement()&&(this.elementRef.nativeElement.style.display="none");this.parentBehavior=WjDirectiveBehavior.getBehavior(this.injectedParent)}};WjDirectiveBehavior.prototype._isAsyncBinding=function(){var e=this.directive[WjDirectiveBehavior.asyncBindingUpdatePropAttr];return null==e?WjOptions.asyncBindings:e};WjDirectiveBehavior.prototype._isChild=function(){return this._isParentInitializer()||this._isParentReferencer()};WjDirectiveBehavior.prototype._isParentInitializer=function(){return null!=this.directive[WjDirectiveBehavior.parPropAttr]};WjDirectiveBehavior.prototype._isParentReferencer=function(){return!!this.typeData.parentRefProperty};WjDirectiveBehavior.prototype._getParentProp=function(){return this.directive[WjDirectiveBehavior.parPropAttr]};WjDirectiveBehavior.prototype._getParentReferenceProperty=function(){return this.typeData.parentRefProperty};WjDirectiveBehavior.prototype._useParentObj=function(){return!1};WjDirectiveBehavior.prototype._parentInCtor=function(){return this._isParentReferencer()&&""==this._getParentReferenceProperty()};WjDirectiveBehavior.prototype._initParent=function(){if(this.parentBehavior&&!this._useParentObj()){var e=this.parentBehavior.directive,t=this._getParentProp(),i=this.directive;if(this._isParentInitializer()){this._getParentProp();var r=e[t];if(wijmo.isArray(r)){var n=this._isHostElement(),o=n?this._getSiblingIndex():-1;(o<0||o>=r.length)&&(o=r.length);r.splice(o,0,i);if(n){this._siblingInsertedEH=this._siblingInserted.bind(this);this.elementRef.nativeElement.addEventListener("DOMNodeInserted",this._siblingInsertedEH)}}else e[t]=i}this._isParentReferencer()&&!this._parentInCtor()&&(i[this._getParentReferenceProperty()]=e)}};WjDirectiveBehavior.prototype._getSiblingIndex=function(){var e=this.elementRef.nativeElement,t=e.parentElement;if(!t)return-1;for(var i=t.childNodes,r=-1,n=this.typeData.siblingId,o=0;o<i.length;o++){var s=i[o];if(1==s.nodeType&&s.getAttribute(WjDirectiveBehavior.siblingDirIdAttr)==n){++r;if(s===e)return r}}return-1};WjDirectiveBehavior.prototype._siblingInserted=function(e){if(e.target===this.elementRef.nativeElement){var t=this._getSiblingIndex(),i=this.parentBehavior.directive[this._getParentProp()],r=this.directive,n=i.indexOf(r);if(t>=0&&n>=0&&t!==n){i.splice(n,1);t=Math.min(t,i.length);i.splice(t,0,r)}}};WjDirectiveBehavior.prototype._isHostElement=function(){return this.elementRef.nativeElement.nodeType===Node.ELEMENT_NODE};WjDirectiveBehavior.prototype._triggerEvent=function(e,t,i){var r=this;if(i&&this._isAsyncBinding()){var n={event:e,args:t};this._pendingEvents.push(n);null==this._pendingEventsTO&&(this._pendingEventsTO=setTimeout((function(){r._triggerPendingEvents(!1)}),0))}else e.emit(t)};WjDirectiveBehavior.prototype._triggerPendingEvents=function(e){if(null!=this._pendingEventsTO){clearTimeout(this._pendingEventsTO);this._pendingEventsTO=null}if(!this.isDestroyed){var t=[].concat(this._pendingEvents);this._pendingEvents.splice(0,this._pendingEvents.length);for(var i=0,r=t;i<r.length;i++){var n=r[i];n.event.emit(n.args)}e&&this._pendingEvents.length&&this._triggerPendingEvents(!0)}};WjDirectiveBehavior.prototype.flushPendingEvents=function(){this._triggerPendingEvents(!0)};WjDirectiveBehavior.evaluatePath=function(e,t){this._pathBinding.path=t;return this._pathBinding.getValue(e)};WjDirectiveBehavior.getBehavior=function(e){return e?e[WjDirectiveBehavior.BehaviourRefProp]:null};WjDirectiveBehavior.directiveTypeDataProp="meta";WjDirectiveBehavior.directiveResolvedTypeDataProp="_wjResolvedMeta";WjDirectiveBehavior.BehaviourRefProp="_wjBehaviour";WjDirectiveBehavior.parPropAttr="wjProperty";WjDirectiveBehavior.wjModelPropAttr="wjModelProperty";WjDirectiveBehavior.initializedEventAttr="initialized";WjDirectiveBehavior.isInitializedPropAttr="isInitialized";WjDirectiveBehavior.siblingDirIdAttr="wj-directive-id";WjDirectiveBehavior.asyncBindingUpdatePropAttr="asyncBindings";WjDirectiveBehavior.siblingDirId=0;WjDirectiveBehavior.wijmoComponentProviderId="WjComponent";WjDirectiveBehavior.outsideZoneEvents={pointermove:!0,pointerover:!0,mousemove:!0,wheel:!0,touchmove:!0,pointerenter:!0,pointerleave:!0,pointerout:!0,mouseover:!0,mouseenter:!0,mouseleave:!0,mouseout:!0};WjDirectiveBehavior._pathBinding=new wijmo.Binding("");
WjDirectiveBehavior.ɵfac = function WjDirectiveBehavior_Factory(t) { ɵngcc0.ɵɵinvalidFactory(); };
WjDirectiveBehavior.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: WjDirectiveBehavior });
return WjDirectiveBehavior}();export{WjDirectiveBehavior};var Ng2Utils=function(){function Ng2Utils(){}Ng2Utils.initEvents=function(e,t){for(var i=[],r=0,n=t;r<n.length;r++){var o=n[r],s=o.props;o.event&&o.eventImpl&&i.push(o.eventImpl+":"+o.event);if(s&&s.length)for(var a=0,v=s;a<v.length;a++){var h=v[a];i.push(h.evImpl+":"+h.evExposed)}}return i};Ng2Utils.getChangeEventNameImplemented=function(e){return Ng2Utils.getChangeEventNameExposed(e)+Ng2Utils.changeEventImplementSuffix};Ng2Utils.getChangeEventNameExposed=function(e){return e+"Change"};Ng2Utils.getWjEventNameImplemented=function(e){return e+Ng2Utils.wjEventImplementSuffix};Ng2Utils.getWjEventName=function(e){if(e){var t=Ng2Utils.wjEventImplementSuffix,i=e.length-t.length;if(i>0&&e.substr(i)===t)return e.substr(0,i)}return null};Ng2Utils.getBaseType=function(e){var t;return e&&(t=Object.getPrototypeOf(e.prototype))&&t.constructor};Ng2Utils.getAnnotations=function(e){return Reflect.getMetadata("annotations",e)};Ng2Utils.getAnnotation=function(e,t){if(t&&e)for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n instanceof t)return n}return null};Ng2Utils.getTypeAnnotation=function(e,t,i){for(var r=e;r;r=i?null:Ng2Utils.getBaseType(r)){var n=Ng2Utils.getAnnotation(Ng2Utils.getAnnotations(r),t);if(n)return n}return null};Ng2Utils.equals=function(e,t){return e!=e&&t!=t||wijmo.DateTime.equals(e,t)||e===t};Ng2Utils._copy=function(e,t,i,r,n){if(e&&t)for(var o in t)if(r||"_"!==o[0]){var s=t[o];if(!n||n(o,s)){var a=e[o];wijmo.isArray(s)?e[o]=(!wijmo.isArray(a)||i?[]:a).concat(s):void 0!==s&&(e[o]=s)}}};Ng2Utils.changeEventImplementSuffix="PC";Ng2Utils.wjEventImplementSuffix="Ng";return Ng2Utils}();export{Ng2Utils};var WjValueAccessor=function(){function WjValueAccessor(e){this._writeQnt=0;this._isSubscribed=!1;this._dirUpdateQnt=0;this._onChange=function(e){};this._onTouched=function(){};this._directive=e;this._behavior=WjDirectiveBehavior.getBehavior(e)}WjValueAccessor.prototype.writeValue=function(e){var t=this;this._modelValue=e;++this._writeQnt;if(this._directive.isInitialized){this._ensureInitEhUnsubscribed();this._updateDirective()}else if(!this._dirInitEh){var i=this._directive.initialized;this._dirInitEh=i.subscribe((function(){t._updateDirective();t._ensureInitEhUnsubscribed()}))}};WjValueAccessor.prototype.registerOnChange=function(e){this._onChange=e};WjValueAccessor.prototype.registerOnTouched=function(e){this._onTouched=e};WjValueAccessor.prototype.setDisabledState=function(e){var t=this._directive;t instanceof wijmo.Control&&(t.isDisabled=e)};WjValueAccessor.prototype._updateDirective=function(){if(!this._isFirstChange()||null!=this._modelValue){this._ensureNgModelProp();if(this._directive&&this._ngModelProp){var e=this._modelValue;""===e&&(e=null);this._dirUpdateQnt++;try{this._directive[this._ngModelProp]=e}finally{this._dirUpdateQnt--}}this._ensureSubscribed()}};WjValueAccessor.prototype._ensureSubscribed=function(){if(!this._isSubscribed){var e=this._directive;if(e){this._ensureNgModelProp();var t=this._ngModelProp=e[WjDirectiveBehavior.wjModelPropAttr];if(t){var i=this._behavior.getPropChangeEvent(t);i&&e[i].addHandler(this._dirValChgEh,this)}e instanceof wijmo.Control&&e.lostFocus.addHandler(this._dirLostFocusEh,this);this._isSubscribed=!0}}};WjValueAccessor.prototype._ensureNgModelProp=function(){!this._ngModelProp&&this._directive&&(this._ngModelProp=this._directive[WjDirectiveBehavior.wjModelPropAttr])};WjValueAccessor.prototype._ensureInitEhUnsubscribed=function(){if(this._dirInitEh){this._dirInitEh.unsubscribe();this._dirInitEh=null}};WjValueAccessor.prototype._isFirstChange=function(){return this._writeQnt<2};WjValueAccessor.prototype._dirValChgEh=function(e,t){if(this._onChange&&this._directive&&this._ngModelProp){var i=this._directive[this._ngModelProp],r=this._modelValue;""===r&&(r=null);if(!(this._dirUpdateQnt>0&&_isNullOrEmpty(r)&&_isNullOrEmpty(i)||Ng2Utils.equals(r,i))||wijmo.isArray(i)){this._modelValue=i;this._onChange(i)}}};WjValueAccessor.prototype._dirLostFocusEh=function(e,t){this._onTouched&&this._onTouched()};return WjValueAccessor}();export{WjValueAccessor};export function WjValueAccessorFactory(e){return new WjValueAccessor(e)}function _isNullOrEmpty(e){return null==e||""===e}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXM1LWVzbS5qcyIsInNvdXJjZXMiOlsiZXM1LWVzbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQXNGOzs7QUFBZzVTIiwic291cmNlc0NvbnRlbnQiOlsi77u/LyohXG4gICAgKlxuICAgICogV2lqbW8gTGlicmFyeSA1LjIwMjExLjc5NFxuICAgICogaHR0cDovL3dpam1vLmNvbS9cbiAgICAqXG4gICAgKiBDb3B5cmlnaHQoYykgR3JhcGVDaXR5LCBJbmMuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgICpcbiAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBHcmFwZUNpdHkgQ29tbWVyY2lhbCBMaWNlbnNlLlxuICAgICogc2FsZXNAd2lqbW8uY29tXG4gICAgKiB3aWptby5jb20vcHJvZHVjdHMvd2lqbW8tNS9saWNlbnNlL1xuICAgICpcbiAgICAqL1xuXG5pbXBvcnR7RXZlbnRFbWl0dGVyLE5nWm9uZX1mcm9tXCJAYW5ndWxhci9jb3JlXCI7aW1wb3J0KmFzIHdpam1vIGZyb21cIkBncmFwZWNpdHkvd2lqbW9cIjt2YXIgV2pPcHRpb25zPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gV2pPcHRpb25zKCl7fVdqT3B0aW9ucy5hc3luY0JpbmRpbmdzPSEwO3JldHVybiBXak9wdGlvbnN9KCk7ZXhwb3J0e1dqT3B0aW9uc307dmFyIFdqQ29tcG9uZW50UmVzb2x2ZWRNZXRhZGF0YT1mdW5jdGlvbigpe2Z1bmN0aW9uIFdqQ29tcG9uZW50UmVzb2x2ZWRNZXRhZGF0YShlKXt0aGlzLmNoYW5nZUV2ZW50TWFwPVtdO3RoaXMuYWxsSW1wbEV2ZW50cz1bXTt0aGlzLnJlc29sdmVDaGFuZ2VFdmVudE1hcChlKX1XakNvbXBvbmVudFJlc29sdmVkTWV0YWRhdGEucHJvdG90eXBlLnJlc29sdmVDaGFuZ2VFdmVudE1hcD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNoYW5nZUV2ZW50TWFwLGk9ZS5vdXRwdXRzLHI9ZS5jaGFuZ2VFdmVudHN8fHt9O3Quc3BsaWNlKDAsdC5sZW5ndGgpO3RoaXMuYWxsSW1wbEV2ZW50cz1bXTtpZihpJiZpLmxlbmd0aCl7dmFyIG49aS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KFwiOlwiKX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntpbXBsTmFtZTplWzBdLnRyaW0oKSxleHBvc2VOYW1lOmVbMV0mJmVbMV0udHJpbSgpfX0pKTt0aGlzLmFsbEltcGxFdmVudHM9bi5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmltcGxOYW1lfSkpO2Zvcih2YXIgbz0wLHM9bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmltcGxOYW1lJiZlLmV4cG9zZU5hbWV9KSk7bzxzLmxlbmd0aDtvKyspe3ZhciBhPXNbb107aWYoTmcyVXRpbHMuZ2V0V2pFdmVudE5hbWUoYS5pbXBsTmFtZSkpe3ZhciB2PXtldmVudEltcGw6YS5pbXBsTmFtZSxldmVudDphLmV4cG9zZU5hbWV9LGg9clthLmV4cG9zZU5hbWVdO2gmJmgubGVuZ3RoJiYodi5wcm9wcz1oLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3Byb3A6ZSxldkV4cG9zZWQ6TmcyVXRpbHMuZ2V0Q2hhbmdlRXZlbnROYW1lRXhwb3NlZChlKSxldkltcGw6TmcyVXRpbHMuZ2V0Q2hhbmdlRXZlbnROYW1lSW1wbGVtZW50ZWQoZSl9fSkpKTt0LnB1c2godil9fWZvcih2YXIgbCBpbiByKWlmKGwuaW5kZXhPZihcIi5cIik+LTEpe3Y9e2V2ZW50SW1wbDpudWxsLGV2ZW50OmwscHJvcHM6cltsXS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntwcm9wOmUsZXZFeHBvc2VkOk5nMlV0aWxzLmdldENoYW5nZUV2ZW50TmFtZUV4cG9zZWQoZSksZXZJbXBsOk5nMlV0aWxzLmdldENoYW5nZUV2ZW50TmFtZUltcGxlbWVudGVkKGUpfX0pKX07dC5wdXNoKHYpfX19O3JldHVybiBXakNvbXBvbmVudFJlc29sdmVkTWV0YWRhdGF9KCk7ZXhwb3J0e1dqQ29tcG9uZW50UmVzb2x2ZWRNZXRhZGF0YX07dmFyIFdqRGlyZWN0aXZlQmVoYXZpb3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBXakRpcmVjdGl2ZUJlaGF2aW9yKGUsdCxpLHIpe3RoaXMuX3BlbmRpbmdFdmVudHM9W107dGhpcy5pc0luaXRpYWxpemVkPSExO3RoaXMuaXNEZXN0cm95ZWQ9ITE7dGhpcy5uelJ1bj1mdW5jdGlvbihlKXtyZXR1cm4gZSgpfTt0aGlzLmRpcmVjdGl2ZT1lO3RoaXMuZWxlbWVudFJlZj10O3RoaXMuaW5qZWN0b3I9aTt2YXIgbj10aGlzLm56PWkuZ2V0KE5nWm9uZSk7biYmKHRoaXMubnpSdW49bi5ydW4uYmluZChuKSk7dGhpcy5pbmplY3RlZFBhcmVudD1yO3ZhciBvPXRoaXMudHlwZURhdGE9ZS5jb25zdHJ1Y3RvcltXakRpcmVjdGl2ZUJlaGF2aW9yLmRpcmVjdGl2ZVR5cGVEYXRhUHJvcF07bnVsbD09by5zaWJsaW5nSWQmJihvLnNpYmxpbmdJZD0rK1dqRGlyZWN0aXZlQmVoYXZpb3Iuc2libGluZ0RpcklkK1wiXCIpO3ZhciBzPWUuY29uc3RydWN0b3JbV2pEaXJlY3RpdmVCZWhhdmlvci5kaXJlY3RpdmVSZXNvbHZlZFR5cGVEYXRhUHJvcF07cz90aGlzLnJlc29sdmVkVHlwZURhdGE9czplLmNvbnN0cnVjdG9yW1dqRGlyZWN0aXZlQmVoYXZpb3IuZGlyZWN0aXZlUmVzb2x2ZWRUeXBlRGF0YVByb3BdPXM9dGhpcy5yZXNvbHZlZFR5cGVEYXRhPW5ldyBXakNvbXBvbmVudFJlc29sdmVkTWV0YWRhdGEobyk7ZVtXakRpcmVjdGl2ZUJlaGF2aW9yLkJlaGF2aW91clJlZlByb3BdPXRoaXM7aVtXakRpcmVjdGl2ZUJlaGF2aW9yLkJlaGF2aW91clJlZlByb3BdPXRoaXM7ZVtXakRpcmVjdGl2ZUJlaGF2aW9yLmlzSW5pdGlhbGl6ZWRQcm9wQXR0cl09ITE7dGhpcy5fY3JlYXRlRXZlbnRzKCk7dGhpcy5fc2V0dXBBc0NoaWxkKCk7dGhpcy5faXNIb3N0RWxlbWVudCgpJiZ0Lm5hdGl2ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFdqRGlyZWN0aXZlQmVoYXZpb3Iuc2libGluZ0RpcklkQXR0cixvLnNpYmxpbmdJZCk7dGhpcy5zdWJzY3JpYmVUb0V2ZW50cyghMSl9V2pEaXJlY3RpdmVCZWhhdmlvci5nZXRIb3N0RWxlbWVudD1mdW5jdGlvbihlLHQpe1dqRGlyZWN0aXZlQmVoYXZpb3Iubmdab25lPXQuZ2V0KE5nWm9uZSk7cmV0dXJuIGUubmF0aXZlRWxlbWVudH07V2pEaXJlY3RpdmVCZWhhdmlvci5hdHRhY2g9ZnVuY3Rpb24oZSx0LGkscil7cmV0dXJuIG5ldyBXakRpcmVjdGl2ZUJlaGF2aW9yKGUsdCxpLHIpfTtXakRpcmVjdGl2ZUJlaGF2aW9yLmdldFpvbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9V2pEaXJlY3RpdmVCZWhhdmlvci5nZXRCZWhhdmlvcihlKTtyZXR1cm4gdCYmdC5uenx8V2pEaXJlY3RpdmVCZWhhdmlvci5uZ1pvbmV9O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLm5nT25Jbml0PWZ1bmN0aW9uKCl7dGhpcy5pc0luaXRpYWxpemVkPSEwO3RoaXMuX2luaXRQYXJlbnQoKTt0aGlzLnN1YnNjcmliZVRvRXZlbnRzKCEwKX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmRpcmVjdGl2ZVtXakRpcmVjdGl2ZUJlaGF2aW9yLmlzSW5pdGlhbGl6ZWRQcm9wQXR0cl09ITA7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtlLmlzRGVzdHJveWVkfHxlLmRpcmVjdGl2ZVtXakRpcmVjdGl2ZUJlaGF2aW9yLmluaXRpYWxpemVkRXZlbnRBdHRyXS5lbWl0KHZvaWQgMCl9KSl9O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLm5nT25EZXN0cm95PWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNEZXN0cm95ZWQpe3RoaXMuaXNEZXN0cm95ZWQ9ITA7dmFyIGU9dGhpcy5kaXJlY3RpdmU7dGhpcy5fc2libGluZ0luc2VydGVkRUgmJnRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Ob2RlSW5zZXJ0ZWRcIix0aGlzLl9zaWJsaW5nSW5zZXJ0ZWRFSCk7aWYodGhpcy5faXNDaGlsZCgpJiZ0aGlzLnBhcmVudEJlaGF2aW9yKXt2YXIgdD10aGlzLnBhcmVudEJlaGF2aW9yLmRpcmVjdGl2ZSxpPXRoaXMuX2dldFBhcmVudFByb3AoKTtpZighdGhpcy5wYXJlbnRCZWhhdmlvci5pc0Rlc3Ryb3llZCYmdCYmaSYmZSl7dmFyIHI9dFtpXTtpZih3aWptby5pc0FycmF5KHIpJiZyKXt2YXIgbj1yLmluZGV4T2YoZSk7bj49MCYmci5zcGxpY2UobiwxKX19fWlmKGUgaW5zdGFuY2VvZiB3aWptby5Db250cm9sJiZlLmhvc3RFbGVtZW50KXt2YXIgbz10aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCxzPW8mJm8ucGFyZW50Tm9kZSxhPXM/QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChzLmNoaWxkTm9kZXMsbyk6LTE7ZS5kaXNwb3NlKCk7aWYoYT4tMSYmQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChzLmNoaWxkTm9kZXMsbyk8MCl7by50ZXh0Q29udGVudD1cIlwiO2E8cy5jaGlsZE5vZGVzLmxlbmd0aCYmcy5yZXBsYWNlQ2hpbGQobyxzLmNoaWxkTm9kZXNbYV0pfX10aGlzLmluamVjdG9yW1dqRGlyZWN0aXZlQmVoYXZpb3IuQmVoYXZpb3VyUmVmUHJvcF09bnVsbH19O1dqRGlyZWN0aXZlQmVoYXZpb3IuaW5zdGFudGlhdGVUZW1wbGF0ZT1mdW5jdGlvbihlLHQsaSxyLG4pe3ZvaWQgMD09PXImJihyPSExKTt2b2lkIDA9PT1uJiYobj17fSk7dmFyIG8scz10LmNyZWF0ZUVtYmVkZGVkVmlldyhpLG4sdC5sZW5ndGgpLGE9cy5yb290Tm9kZXM7aWYociYmMT09PWEubGVuZ3RoKW89YVswXTtlbHNle289ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodmFyIHY9MCxoPWE7djxoLmxlbmd0aDt2Kyspe3ZhciBsPWhbdl07by5hcHBlbmRDaGlsZChsKX19ZSYmZS5hcHBlbmRDaGlsZChvKTtyZXR1cm57dmlld1JlZjpzLHJvb3RFbGVtZW50Om99fTtXakRpcmVjdGl2ZUJlaGF2aW9yLnByb3RvdHlwZS5nZXRQcm9wQ2hhbmdlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50eXBlRGF0YS5jaGFuZ2VFdmVudHM7aWYodClmb3IodmFyIGkgaW4gdClpZih0W2ldLmluZGV4T2YoZSk+LTEpcmV0dXJuIGk7cmV0dXJuIG51bGx9O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl9jcmVhdGVFdmVudHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PXRoaXMucmVzb2x2ZWRUeXBlRGF0YS5hbGxJbXBsRXZlbnRzO2U8dC5sZW5ndGg7ZSsrKXt2YXIgaT10W2VdO3RoaXMuZGlyZWN0aXZlW2ldPW5ldyBFdmVudEVtaXR0ZXIoITEpfX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUuc3Vic2NyaWJlVG9FdmVudHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZXNvbHZlZFR5cGVEYXRhLmNoYW5nZUV2ZW50TWFwO2U9ISFlO2Zvcih2YXIgaT0wLHI9dDtpPHIubGVuZ3RoO2krKyl7ZSE9PShzPXJbaV0pLmV2ZW50LmluZGV4T2YoXCIuXCIpPDAmJnRoaXMuYWRkSGFuZGxlcnMocyl9aWYoZSlmb3IodmFyIG49MCxvPXQ7bjxvLmxlbmd0aDtuKyspe3ZhciBzPW9bbl07dGhpcy50cmlnZ2VyUHJvcENoYW5nZUV2ZW50cyhzLCEwKX19O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLmFkZEhhbmRsZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsaT10aGlzLmRpcmVjdGl2ZTtXakRpcmVjdGl2ZUJlaGF2aW9yLmV2YWx1YXRlUGF0aChpLGUuZXZlbnQpLmFkZEhhbmRsZXIoKGZ1bmN0aW9uKHIsbil7dC5uelJ1bigoZnVuY3Rpb24oKXt0LmlzSW5pdGlhbGl6ZWQmJnQudHJpZ2dlclByb3BDaGFuZ2VFdmVudHMoZSk7ZS5ldmVudEltcGwmJnQuX3RyaWdnZXJFdmVudChpW2UuZXZlbnRJbXBsXSxuLGUucHJvcHMmJmUucHJvcHMubGVuZ3RoPjApfSkpfSkpfTtXakRpcmVjdGl2ZUJlaGF2aW9yLnByb3RvdHlwZS50cmlnZ2VyUHJvcENoYW5nZUV2ZW50cz1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PSEwKTt2YXIgaT10aGlzLmRpcmVjdGl2ZTtpZihlLnByb3BzJiZlLnByb3BzLmxlbmd0aClmb3IodmFyIHI9MCxuPWUucHJvcHM7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07dGhpcy5fdHJpZ2dlckV2ZW50KGlbby5ldkltcGxdLGlbby5wcm9wXSx0KX19O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl9zZXR1cEFzQ2hpbGQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9pc0NoaWxkKCkpe3RoaXMuX2lzSG9zdEVsZW1lbnQoKSYmKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIpO3RoaXMucGFyZW50QmVoYXZpb3I9V2pEaXJlY3RpdmVCZWhhdmlvci5nZXRCZWhhdmlvcih0aGlzLmluamVjdGVkUGFyZW50KX19O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl9pc0FzeW5jQmluZGluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGlyZWN0aXZlW1dqRGlyZWN0aXZlQmVoYXZpb3IuYXN5bmNCaW5kaW5nVXBkYXRlUHJvcEF0dHJdO3JldHVybiBudWxsPT1lP1dqT3B0aW9ucy5hc3luY0JpbmRpbmdzOmV9O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl9pc0NoaWxkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzUGFyZW50SW5pdGlhbGl6ZXIoKXx8dGhpcy5faXNQYXJlbnRSZWZlcmVuY2VyKCl9O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl9pc1BhcmVudEluaXRpYWxpemVyPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMuZGlyZWN0aXZlW1dqRGlyZWN0aXZlQmVoYXZpb3IucGFyUHJvcEF0dHJdfTtXakRpcmVjdGl2ZUJlaGF2aW9yLnByb3RvdHlwZS5faXNQYXJlbnRSZWZlcmVuY2VyPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnR5cGVEYXRhLnBhcmVudFJlZlByb3BlcnR5fTtXakRpcmVjdGl2ZUJlaGF2aW9yLnByb3RvdHlwZS5fZ2V0UGFyZW50UHJvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdGl2ZVtXakRpcmVjdGl2ZUJlaGF2aW9yLnBhclByb3BBdHRyXX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUuX2dldFBhcmVudFJlZmVyZW5jZVByb3BlcnR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZURhdGEucGFyZW50UmVmUHJvcGVydHl9O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl91c2VQYXJlbnRPYmo9ZnVuY3Rpb24oKXtyZXR1cm4hMX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUuX3BhcmVudEluQ3Rvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1BhcmVudFJlZmVyZW5jZXIoKSYmXCJcIj09dGhpcy5fZ2V0UGFyZW50UmVmZXJlbmNlUHJvcGVydHkoKX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUuX2luaXRQYXJlbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudEJlaGF2aW9yJiYhdGhpcy5fdXNlUGFyZW50T2JqKCkpe3ZhciBlPXRoaXMucGFyZW50QmVoYXZpb3IuZGlyZWN0aXZlLHQ9dGhpcy5fZ2V0UGFyZW50UHJvcCgpLGk9dGhpcy5kaXJlY3RpdmU7aWYodGhpcy5faXNQYXJlbnRJbml0aWFsaXplcigpKXt0aGlzLl9nZXRQYXJlbnRQcm9wKCk7dmFyIHI9ZVt0XTtpZih3aWptby5pc0FycmF5KHIpKXt2YXIgbj10aGlzLl9pc0hvc3RFbGVtZW50KCksbz1uP3RoaXMuX2dldFNpYmxpbmdJbmRleCgpOi0xOyhvPDB8fG8+PXIubGVuZ3RoKSYmKG89ci5sZW5ndGgpO3Iuc3BsaWNlKG8sMCxpKTtpZihuKXt0aGlzLl9zaWJsaW5nSW5zZXJ0ZWRFSD10aGlzLl9zaWJsaW5nSW5zZXJ0ZWQuYmluZCh0aGlzKTt0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZUluc2VydGVkXCIsdGhpcy5fc2libGluZ0luc2VydGVkRUgpfX1lbHNlIGVbdF09aX10aGlzLl9pc1BhcmVudFJlZmVyZW5jZXIoKSYmIXRoaXMuX3BhcmVudEluQ3RvcigpJiYoaVt0aGlzLl9nZXRQYXJlbnRSZWZlcmVuY2VQcm9wZXJ0eSgpXT1lKX19O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLl9nZXRTaWJsaW5nSW5kZXg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCx0PWUucGFyZW50RWxlbWVudDtpZighdClyZXR1cm4tMTtmb3IodmFyIGk9dC5jaGlsZE5vZGVzLHI9LTEsbj10aGlzLnR5cGVEYXRhLnNpYmxpbmdJZCxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBzPWlbb107aWYoMT09cy5ub2RlVHlwZSYmcy5nZXRBdHRyaWJ1dGUoV2pEaXJlY3RpdmVCZWhhdmlvci5zaWJsaW5nRGlySWRBdHRyKT09bil7KytyO2lmKHM9PT1lKXJldHVybiByfX1yZXR1cm4tMX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUuX3NpYmxpbmdJbnNlcnRlZD1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PXRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KXt2YXIgdD10aGlzLl9nZXRTaWJsaW5nSW5kZXgoKSxpPXRoaXMucGFyZW50QmVoYXZpb3IuZGlyZWN0aXZlW3RoaXMuX2dldFBhcmVudFByb3AoKV0scj10aGlzLmRpcmVjdGl2ZSxuPWkuaW5kZXhPZihyKTtpZih0Pj0wJiZuPj0wJiZ0IT09bil7aS5zcGxpY2UobiwxKTt0PU1hdGgubWluKHQsaS5sZW5ndGgpO2kuc3BsaWNlKHQsMCxyKX19fTtXakRpcmVjdGl2ZUJlaGF2aW9yLnByb3RvdHlwZS5faXNIb3N0RWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfTtXakRpcmVjdGl2ZUJlaGF2aW9yLnByb3RvdHlwZS5fdHJpZ2dlckV2ZW50PWZ1bmN0aW9uKGUsdCxpKXt2YXIgcj10aGlzO2lmKGkmJnRoaXMuX2lzQXN5bmNCaW5kaW5nKCkpe3ZhciBuPXtldmVudDplLGFyZ3M6dH07dGhpcy5fcGVuZGluZ0V2ZW50cy5wdXNoKG4pO251bGw9PXRoaXMuX3BlbmRpbmdFdmVudHNUTyYmKHRoaXMuX3BlbmRpbmdFdmVudHNUTz1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3IuX3RyaWdnZXJQZW5kaW5nRXZlbnRzKCExKX0pLDApKX1lbHNlIGUuZW1pdCh0KX07V2pEaXJlY3RpdmVCZWhhdmlvci5wcm90b3R5cGUuX3RyaWdnZXJQZW5kaW5nRXZlbnRzPWZ1bmN0aW9uKGUpe2lmKG51bGwhPXRoaXMuX3BlbmRpbmdFdmVudHNUTyl7Y2xlYXJUaW1lb3V0KHRoaXMuX3BlbmRpbmdFdmVudHNUTyk7dGhpcy5fcGVuZGluZ0V2ZW50c1RPPW51bGx9aWYoIXRoaXMuaXNEZXN0cm95ZWQpe3ZhciB0PVtdLmNvbmNhdCh0aGlzLl9wZW5kaW5nRXZlbnRzKTt0aGlzLl9wZW5kaW5nRXZlbnRzLnNwbGljZSgwLHRoaXMuX3BlbmRpbmdFdmVudHMubGVuZ3RoKTtmb3IodmFyIGk9MCxyPXQ7aTxyLmxlbmd0aDtpKyspe3ZhciBuPXJbaV07bi5ldmVudC5lbWl0KG4uYXJncyl9ZSYmdGhpcy5fcGVuZGluZ0V2ZW50cy5sZW5ndGgmJnRoaXMuX3RyaWdnZXJQZW5kaW5nRXZlbnRzKCEwKX19O1dqRGlyZWN0aXZlQmVoYXZpb3IucHJvdG90eXBlLmZsdXNoUGVuZGluZ0V2ZW50cz1mdW5jdGlvbigpe3RoaXMuX3RyaWdnZXJQZW5kaW5nRXZlbnRzKCEwKX07V2pEaXJlY3RpdmVCZWhhdmlvci5ldmFsdWF0ZVBhdGg9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wYXRoQmluZGluZy5wYXRoPXQ7cmV0dXJuIHRoaXMuX3BhdGhCaW5kaW5nLmdldFZhbHVlKGUpfTtXakRpcmVjdGl2ZUJlaGF2aW9yLmdldEJlaGF2aW9yPWZ1bmN0aW9uKGUpe3JldHVybiBlP2VbV2pEaXJlY3RpdmVCZWhhdmlvci5CZWhhdmlvdXJSZWZQcm9wXTpudWxsfTtXakRpcmVjdGl2ZUJlaGF2aW9yLmRpcmVjdGl2ZVR5cGVEYXRhUHJvcD1cIm1ldGFcIjtXakRpcmVjdGl2ZUJlaGF2aW9yLmRpcmVjdGl2ZVJlc29sdmVkVHlwZURhdGFQcm9wPVwiX3dqUmVzb2x2ZWRNZXRhXCI7V2pEaXJlY3RpdmVCZWhhdmlvci5CZWhhdmlvdXJSZWZQcm9wPVwiX3dqQmVoYXZpb3VyXCI7V2pEaXJlY3RpdmVCZWhhdmlvci5wYXJQcm9wQXR0cj1cIndqUHJvcGVydHlcIjtXakRpcmVjdGl2ZUJlaGF2aW9yLndqTW9kZWxQcm9wQXR0cj1cIndqTW9kZWxQcm9wZXJ0eVwiO1dqRGlyZWN0aXZlQmVoYXZpb3IuaW5pdGlhbGl6ZWRFdmVudEF0dHI9XCJpbml0aWFsaXplZFwiO1dqRGlyZWN0aXZlQmVoYXZpb3IuaXNJbml0aWFsaXplZFByb3BBdHRyPVwiaXNJbml0aWFsaXplZFwiO1dqRGlyZWN0aXZlQmVoYXZpb3Iuc2libGluZ0RpcklkQXR0cj1cIndqLWRpcmVjdGl2ZS1pZFwiO1dqRGlyZWN0aXZlQmVoYXZpb3IuYXN5bmNCaW5kaW5nVXBkYXRlUHJvcEF0dHI9XCJhc3luY0JpbmRpbmdzXCI7V2pEaXJlY3RpdmVCZWhhdmlvci5zaWJsaW5nRGlySWQ9MDtXakRpcmVjdGl2ZUJlaGF2aW9yLndpam1vQ29tcG9uZW50UHJvdmlkZXJJZD1cIldqQ29tcG9uZW50XCI7V2pEaXJlY3RpdmVCZWhhdmlvci5vdXRzaWRlWm9uZUV2ZW50cz17cG9pbnRlcm1vdmU6ITAscG9pbnRlcm92ZXI6ITAsbW91c2Vtb3ZlOiEwLHdoZWVsOiEwLHRvdWNobW92ZTohMCxwb2ludGVyZW50ZXI6ITAscG9pbnRlcmxlYXZlOiEwLHBvaW50ZXJvdXQ6ITAsbW91c2VvdmVyOiEwLG1vdXNlZW50ZXI6ITAsbW91c2VsZWF2ZTohMCxtb3VzZW91dDohMH07V2pEaXJlY3RpdmVCZWhhdmlvci5fcGF0aEJpbmRpbmc9bmV3IHdpam1vLkJpbmRpbmcoXCJcIik7cmV0dXJuIFdqRGlyZWN0aXZlQmVoYXZpb3J9KCk7ZXhwb3J0e1dqRGlyZWN0aXZlQmVoYXZpb3J9O3ZhciBOZzJVdGlscz1mdW5jdGlvbigpe2Z1bmN0aW9uIE5nMlV0aWxzKCl7fU5nMlV0aWxzLmluaXRFdmVudHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9W10scj0wLG49dDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXSxzPW8ucHJvcHM7by5ldmVudCYmby5ldmVudEltcGwmJmkucHVzaChvLmV2ZW50SW1wbCtcIjpcIitvLmV2ZW50KTtpZihzJiZzLmxlbmd0aClmb3IodmFyIGE9MCx2PXM7YTx2Lmxlbmd0aDthKyspe3ZhciBoPXZbYV07aS5wdXNoKGguZXZJbXBsK1wiOlwiK2guZXZFeHBvc2VkKX19cmV0dXJuIGl9O05nMlV0aWxzLmdldENoYW5nZUV2ZW50TmFtZUltcGxlbWVudGVkPWZ1bmN0aW9uKGUpe3JldHVybiBOZzJVdGlscy5nZXRDaGFuZ2VFdmVudE5hbWVFeHBvc2VkKGUpK05nMlV0aWxzLmNoYW5nZUV2ZW50SW1wbGVtZW50U3VmZml4fTtOZzJVdGlscy5nZXRDaGFuZ2VFdmVudE5hbWVFeHBvc2VkPWZ1bmN0aW9uKGUpe3JldHVybiBlK1wiQ2hhbmdlXCJ9O05nMlV0aWxzLmdldFdqRXZlbnROYW1lSW1wbGVtZW50ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrTmcyVXRpbHMud2pFdmVudEltcGxlbWVudFN1ZmZpeH07TmcyVXRpbHMuZ2V0V2pFdmVudE5hbWU9ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9TmcyVXRpbHMud2pFdmVudEltcGxlbWVudFN1ZmZpeCxpPWUubGVuZ3RoLXQubGVuZ3RoO2lmKGk+MCYmZS5zdWJzdHIoaSk9PT10KXJldHVybiBlLnN1YnN0cigwLGkpfXJldHVybiBudWxsfTtOZzJVdGlscy5nZXRCYXNlVHlwZT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSYmKHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSkmJnQuY29uc3RydWN0b3J9O05nMlV0aWxzLmdldEFubm90YXRpb25zPWZ1bmN0aW9uKGUpe3JldHVybiBSZWZsZWN0LmdldE1ldGFkYXRhKFwiYW5ub3RhdGlvbnNcIixlKX07TmcyVXRpbHMuZ2V0QW5ub3RhdGlvbj1mdW5jdGlvbihlLHQpe2lmKHQmJmUpZm9yKHZhciBpPTAscj1lO2k8ci5sZW5ndGg7aSsrKXt2YXIgbj1yW2ldO2lmKG4gaW5zdGFuY2VvZiB0KXJldHVybiBufXJldHVybiBudWxsfTtOZzJVdGlscy5nZXRUeXBlQW5ub3RhdGlvbj1mdW5jdGlvbihlLHQsaSl7Zm9yKHZhciByPWU7cjtyPWk/bnVsbDpOZzJVdGlscy5nZXRCYXNlVHlwZShyKSl7dmFyIG49TmcyVXRpbHMuZ2V0QW5ub3RhdGlvbihOZzJVdGlscy5nZXRBbm5vdGF0aW9ucyhyKSx0KTtpZihuKXJldHVybiBufXJldHVybiBudWxsfTtOZzJVdGlscy5lcXVhbHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSE9ZSYmdCE9dHx8d2lqbW8uRGF0ZVRpbWUuZXF1YWxzKGUsdCl8fGU9PT10fTtOZzJVdGlscy5fY29weT1mdW5jdGlvbihlLHQsaSxyLG4pe2lmKGUmJnQpZm9yKHZhciBvIGluIHQpaWYocnx8XCJfXCIhPT1vWzBdKXt2YXIgcz10W29dO2lmKCFufHxuKG8scykpe3ZhciBhPWVbb107d2lqbW8uaXNBcnJheShzKT9lW29dPSghd2lqbW8uaXNBcnJheShhKXx8aT9bXTphKS5jb25jYXQocyk6dm9pZCAwIT09cyYmKGVbb109cyl9fX07TmcyVXRpbHMuY2hhbmdlRXZlbnRJbXBsZW1lbnRTdWZmaXg9XCJQQ1wiO05nMlV0aWxzLndqRXZlbnRJbXBsZW1lbnRTdWZmaXg9XCJOZ1wiO3JldHVybiBOZzJVdGlsc30oKTtleHBvcnR7TmcyVXRpbHN9O3ZhciBXalZhbHVlQWNjZXNzb3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBXalZhbHVlQWNjZXNzb3IoZSl7dGhpcy5fd3JpdGVRbnQ9MDt0aGlzLl9pc1N1YnNjcmliZWQ9ITE7dGhpcy5fZGlyVXBkYXRlUW50PTA7dGhpcy5fb25DaGFuZ2U9ZnVuY3Rpb24oZSl7fTt0aGlzLl9vblRvdWNoZWQ9ZnVuY3Rpb24oKXt9O3RoaXMuX2RpcmVjdGl2ZT1lO3RoaXMuX2JlaGF2aW9yPVdqRGlyZWN0aXZlQmVoYXZpb3IuZ2V0QmVoYXZpb3IoZSl9V2pWYWx1ZUFjY2Vzc29yLnByb3RvdHlwZS53cml0ZVZhbHVlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbW9kZWxWYWx1ZT1lOysrdGhpcy5fd3JpdGVRbnQ7aWYodGhpcy5fZGlyZWN0aXZlLmlzSW5pdGlhbGl6ZWQpe3RoaXMuX2Vuc3VyZUluaXRFaFVuc3Vic2NyaWJlZCgpO3RoaXMuX3VwZGF0ZURpcmVjdGl2ZSgpfWVsc2UgaWYoIXRoaXMuX2RpckluaXRFaCl7dmFyIGk9dGhpcy5fZGlyZWN0aXZlLmluaXRpYWxpemVkO3RoaXMuX2RpckluaXRFaD1pLnN1YnNjcmliZSgoZnVuY3Rpb24oKXt0Ll91cGRhdGVEaXJlY3RpdmUoKTt0Ll9lbnN1cmVJbml0RWhVbnN1YnNjcmliZWQoKX0pKX19O1dqVmFsdWVBY2Nlc3Nvci5wcm90b3R5cGUucmVnaXN0ZXJPbkNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLl9vbkNoYW5nZT1lfTtXalZhbHVlQWNjZXNzb3IucHJvdG90eXBlLnJlZ2lzdGVyT25Ub3VjaGVkPWZ1bmN0aW9uKGUpe3RoaXMuX29uVG91Y2hlZD1lfTtXalZhbHVlQWNjZXNzb3IucHJvdG90eXBlLnNldERpc2FibGVkU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGlyZWN0aXZlO3QgaW5zdGFuY2VvZiB3aWptby5Db250cm9sJiYodC5pc0Rpc2FibGVkPWUpfTtXalZhbHVlQWNjZXNzb3IucHJvdG90eXBlLl91cGRhdGVEaXJlY3RpdmU9ZnVuY3Rpb24oKXtpZighdGhpcy5faXNGaXJzdENoYW5nZSgpfHxudWxsIT10aGlzLl9tb2RlbFZhbHVlKXt0aGlzLl9lbnN1cmVOZ01vZGVsUHJvcCgpO2lmKHRoaXMuX2RpcmVjdGl2ZSYmdGhpcy5fbmdNb2RlbFByb3Ape3ZhciBlPXRoaXMuX21vZGVsVmFsdWU7XCJcIj09PWUmJihlPW51bGwpO3RoaXMuX2RpclVwZGF0ZVFudCsrO3RyeXt0aGlzLl9kaXJlY3RpdmVbdGhpcy5fbmdNb2RlbFByb3BdPWV9ZmluYWxseXt0aGlzLl9kaXJVcGRhdGVRbnQtLX19dGhpcy5fZW5zdXJlU3Vic2NyaWJlZCgpfX07V2pWYWx1ZUFjY2Vzc29yLnByb3RvdHlwZS5fZW5zdXJlU3Vic2NyaWJlZD1mdW5jdGlvbigpe2lmKCF0aGlzLl9pc1N1YnNjcmliZWQpe3ZhciBlPXRoaXMuX2RpcmVjdGl2ZTtpZihlKXt0aGlzLl9lbnN1cmVOZ01vZGVsUHJvcCgpO3ZhciB0PXRoaXMuX25nTW9kZWxQcm9wPWVbV2pEaXJlY3RpdmVCZWhhdmlvci53ak1vZGVsUHJvcEF0dHJdO2lmKHQpe3ZhciBpPXRoaXMuX2JlaGF2aW9yLmdldFByb3BDaGFuZ2VFdmVudCh0KTtpJiZlW2ldLmFkZEhhbmRsZXIodGhpcy5fZGlyVmFsQ2hnRWgsdGhpcyl9ZSBpbnN0YW5jZW9mIHdpam1vLkNvbnRyb2wmJmUubG9zdEZvY3VzLmFkZEhhbmRsZXIodGhpcy5fZGlyTG9zdEZvY3VzRWgsdGhpcyk7dGhpcy5faXNTdWJzY3JpYmVkPSEwfX19O1dqVmFsdWVBY2Nlc3Nvci5wcm90b3R5cGUuX2Vuc3VyZU5nTW9kZWxQcm9wPWZ1bmN0aW9uKCl7IXRoaXMuX25nTW9kZWxQcm9wJiZ0aGlzLl9kaXJlY3RpdmUmJih0aGlzLl9uZ01vZGVsUHJvcD10aGlzLl9kaXJlY3RpdmVbV2pEaXJlY3RpdmVCZWhhdmlvci53ak1vZGVsUHJvcEF0dHJdKX07V2pWYWx1ZUFjY2Vzc29yLnByb3RvdHlwZS5fZW5zdXJlSW5pdEVoVW5zdWJzY3JpYmVkPWZ1bmN0aW9uKCl7aWYodGhpcy5fZGlySW5pdEVoKXt0aGlzLl9kaXJJbml0RWgudW5zdWJzY3JpYmUoKTt0aGlzLl9kaXJJbml0RWg9bnVsbH19O1dqVmFsdWVBY2Nlc3Nvci5wcm90b3R5cGUuX2lzRmlyc3RDaGFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JpdGVRbnQ8Mn07V2pWYWx1ZUFjY2Vzc29yLnByb3RvdHlwZS5fZGlyVmFsQ2hnRWg9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9vbkNoYW5nZSYmdGhpcy5fZGlyZWN0aXZlJiZ0aGlzLl9uZ01vZGVsUHJvcCl7dmFyIGk9dGhpcy5fZGlyZWN0aXZlW3RoaXMuX25nTW9kZWxQcm9wXSxyPXRoaXMuX21vZGVsVmFsdWU7XCJcIj09PXImJihyPW51bGwpO2lmKCEodGhpcy5fZGlyVXBkYXRlUW50PjAmJl9pc051bGxPckVtcHR5KHIpJiZfaXNOdWxsT3JFbXB0eShpKXx8TmcyVXRpbHMuZXF1YWxzKHIsaSkpfHx3aWptby5pc0FycmF5KGkpKXt0aGlzLl9tb2RlbFZhbHVlPWk7dGhpcy5fb25DaGFuZ2UoaSl9fX07V2pWYWx1ZUFjY2Vzc29yLnByb3RvdHlwZS5fZGlyTG9zdEZvY3VzRWg9ZnVuY3Rpb24oZSx0KXt0aGlzLl9vblRvdWNoZWQmJnRoaXMuX29uVG91Y2hlZCgpfTtyZXR1cm4gV2pWYWx1ZUFjY2Vzc29yfSgpO2V4cG9ydHtXalZhbHVlQWNjZXNzb3J9O2V4cG9ydCBmdW5jdGlvbiBXalZhbHVlQWNjZXNzb3JGYWN0b3J5KGUpe3JldHVybiBuZXcgV2pWYWx1ZUFjY2Vzc29yKGUpfWZ1bmN0aW9uIF9pc051bGxPckVtcHR5KGUpe3JldHVybiBudWxsPT1lfHxcIlwiPT09ZX0iXX0=